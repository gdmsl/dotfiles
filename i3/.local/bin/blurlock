#!/bin/bash
ICON=$XDG_DATA_HOME/xlock/lock.png
TMPBG=/tmp/screen.png

# take the screenshot
maim -u /tmp/screen.png

# reduce quality of screenshot and attach lock image
convert $TMPBG -scale 10% -scale 1000% $TMPBG
convert $TMPBG $ICON -gravity East -composite -matte $TMPBG

# send signal to dunst so notifications stop displaying over the lockscreen
dunstctl set-paused true

# lock
i3lock -n -i $TMPBG

# send signal to dunst so notifications restart dysplaying
dunstctl set-paused false
